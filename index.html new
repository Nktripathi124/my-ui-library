<!DOCTYPE html>
<html lang="en-IN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Rooftop Gardening - Premium Plants & Seeds | Buy Online India</title>
    <meta name="description" content="Buy premium plants, seeds, pots & gardening tools online. Free delivery on orders above ₹1599 within Delhi. For other locations, shipping charges apply.">
    <meta name="keywords" content="buy plants online, indoor plants, seeds, gardening tools, home garden India">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Rooftop Gardening">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="icon" type="image/x-icon" href="/logo.png">
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="apple-touch-icon" href="/logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            -webkit-tap-highlight-color: transparent;
        }
        html { scroll-behavior: smooth; }
        .line-clamp-2 { 
            display: -webkit-box; 
            -webkit-line-clamp: 2; 
            -webkit-box-orient: vertical; 
            overflow: hidden; 
        }
        
        @media (max-width: 640px) {
            .hero-title {
                font-size: 2.5rem;
                line-height: 1.2;
            }
            .hero-subtitle {
                font-size: 1rem;
            }
            .section-title {
                font-size: 1.875rem;
            }
        }
        
        #mobileMenu {
            transition: all 0.3s ease;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        @media (min-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        @media (min-width: 768px) {
            .category-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        .support-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .support-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        @media (min-width: 768px) {
            .footer-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 640px) {
            #cartDrawer {
                width: 100%;
                max-width: 100%;
            }
        }
        
        button, 
        .button-like {
            min-height: 44px;
            min-width: 44px;
            padding: 0.5rem 1rem;
        }
        
        .policy-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .policy-tab {
            flex: 1;
            min-width: 140px;
            text-align: center;
        }
        
        input, 
        textarea, 
        select {
            font-size: 16px;
            padding: 0.75rem;
        }
        
        .product-card {
            height: 100%;
            display: flex;
            flex-direction: column;
            border: 1px solid #e5e7eb;
            border-radius: 1rem;
            overflow: hidden;
            background: white;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            transform: translateY(-4px);
        }
        
        .product-image {
            aspect-ratio: 1/1;
            object-fit: cover;
        }
        
        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
        }
        
        :focus-visible {
            outline: 2px solid #16a34a;
            outline-offset: 2px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        .logo-container {
            background: white;
            border-radius: 12px;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .logo-img {
            max-width: 100%;
            height: auto;
            object-fit: contain;
        }
        
        .logo-placeholder {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #16a34a, #22c55e);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        
        .about-logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .footer-logo {
            width: 50px;
            height: 50px;
            border-radius: 12px;
        }
        
        .quick-view-modal {
            animation: fadeIn 0.2s ease;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .quick-view-content {
            background: white;
            border-radius: 1rem;
            max-width: 64rem;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        @media (max-width: 768px) {
            .quick-view-content {
                max-height: 85vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .view-btn {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
            transition: all 0.2s ease;
        }
        
        .view-btn:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
        }
        
        .discount-badge {
            background: linear-gradient(to right, #ef4444, #ec4899);
            color: white;
            font-weight: bold;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
        }
        
        .featured-badge {
            background: linear-gradient(to right, #f59e0b, #fbbf24);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
        }
        
        .sold-out-badge {
            background: linear-gradient(to right, #6b7280, #4b5563);
            color: white;
            font-weight: bold;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 20;
            white-space: nowrap;
        }
        
        .limited-badge {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
            font-weight: bold;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.7rem;
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            box-shadow: 0 4px 8px rgba(249, 115, 22, 0.3);
            z-index: 10;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.9; box-shadow: 0 4px 12px rgba(249, 115, 22, 0.5); }
            100% { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50">

    
    <div id="loading" class="fixed inset-0 bg-white z-50 flex items-center justify-center hidden">
        <div class="w-10 h-10 border-4 border-green-200 border-t-green-600 rounded-full animate-spin"></div>
    </div>

    
    <header class="bg-gradient-to-r from-green-700 to-green-600 text-white sticky top-0 z-40 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <a href="#" class="flex items-center gap-2 sm:gap-3 no-underline">
                    <div class="logo-container w-12 h-12">
                        <img src="/logo.png" 
                             alt="Rooftop Gardening Logo" 
                             class="logo-img"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="logo-placeholder hidden">
                            <i class="fas fa-seedling"></i>
                        </div>
                    </div>
                    <div class="hidden sm:block">
                        <h1 class="font-bold text-lg">Rooftop Gardening</h1>
                        <p class="text-xs text-green-200">Premium Plants & Seeds</p>
                    </div>
                    <div class="sm:hidden font-bold text-sm">
                        Rooftop Gardening
                    </div>
                </a>
                
                <nav class="hidden md:flex items-center gap-6">
                    <a href="#home" class="hover:text-green-200 font-medium">Home</a>
                    <a href="#products" class="hover:text-green-200 font-medium">Products</a>
                    <a href="#track" class="hover:text-green-200 font-medium">Track Order</a>
                    <a href="#support" class="hover:text-green-200 font-medium">Support</a>
                    <a href="#policies" class="hover:text-green-200 font-medium">Policies</a>
                </nav>
                
                <div class="flex items-center gap-2">
                    <button onclick="openCart()" class="relative p-2 hover:bg-white/10 rounded-lg">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cartCount" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-xs rounded-full flex items-center justify-center hidden">0</span>
                    </button>
                    <button onclick="toggleMobileMenu()" class="md:hidden p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div id="mobileMenu" class="hidden pb-4 border-t border-green-600">
                <div class="flex flex-col space-y-1 pt-2">
                    <a href="#home" class="block py-3 px-2 hover:bg-green-600 rounded-lg font-medium" onclick="toggleMobileMenu()">Home</a>
                    <a href="#products" class="block py-3 px-2 hover:bg-green-600 rounded-lg font-medium" onclick="toggleMobileMenu()">Products</a>
                    <a href="#track" class="block py-3 px-2 hover:bg-green-600 rounded-lg font-medium" onclick="toggleMobileMenu()">Track Order</a>
                    <a href="#support" class="block py-3 px-2 hover:bg-green-600 rounded-lg font-medium" onclick="toggleMobileMenu()">Support</a>
                    <a href="#policies" class="block py-3 px-2 hover:bg-green-600 rounded-lg font-medium" onclick="toggleMobileMenu()">Policies</a>
                </div>
            </div>
        </div>
    </header>

    
    <section id="home" class="bg-gradient-to-br from-green-800 via-green-700 to-green-600 text-white py-12 md:py-20">
        <div class="container mx-auto px-4 text-center">
            <h1 class="hero-title text-3xl md:text-5xl lg:text-6xl font-extrabold mb-4 md:mb-6">
                Grow Your Own <span class="text-green-300">Green Paradise</span>
            </h1>
            <p class="hero-subtitle text-base md:text-lg text-green-100 mb-6 md:mb-8 max-w-2xl mx-auto px-2">
                Premium plants, seeds & gardening supplies delivered to your doorstep!
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-3 md:gap-4">
                <a href="#products" class="bg-white text-green-700 font-bold px-6 md:px-8 py-3 rounded-full hover:bg-green-50 text-sm md:text-base text-center no-underline">
                    <i class="fas fa-shopping-bag mr-2"></i>Shop Now
                </a>
                <a href="#track" class="border-2 border-white px-6 md:px-8 py-3 rounded-full hover:bg-white/10 text-sm md:text-base text-center no-underline">
                    <i class="fas fa-search mr-2"></i>Track Order
                </a>
            </div>
            <div class="flex flex-wrap justify-center gap-2 md:gap-4 mt-8 md:mt-10 text-xs md:text-sm">
                <span class="bg-white/10 px-3 md:px-4 py-1.5 md:py-2 rounded-full whitespace-nowrap">
                    <i class="fas fa-truck mr-1 md:mr-2"></i>Free Delivery ₹1599+ (Delhi Only)
                </span>
                <span class="bg-white/10 px-3 md:px-4 py-1.5 md:py-2 rounded-full whitespace-nowrap">
                    <i class="fas fa-award mr-1 md:mr-2"></i>Premium Quality
                </span>
                <span class="bg-white/10 px-3 md:px-4 py-1.5 md:py-2 rounded-full whitespace-nowrap">
                    <i class="fas fa-headset mr-1 md:mr-2"></i>24/7 Support
                </span>
            </div>
        </div>
    </section>

    
    <section class="py-8 md:py-12 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="section-title text-2xl md:text-3xl font-bold text-center mb-6 md:mb-10">
                <i class="fas fa-star text-yellow-500 mr-2"></i>Featured Products
            </h2>
            <div id="featuredProducts" class="products-grid">
                <div class="animate-pulse">
                    <div class="bg-gray-200 rounded-xl aspect-square mb-2"></div>
                    <div class="h-4 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-2"></div>
                </div>
                <div class="animate-pulse">
                    <div class="bg-gray-200 rounded-xl aspect-square mb-2"></div>
                    <div class="h-4 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-2"></div>
                </div>
                <div class="animate-pulse hidden md:block">
                    <div class="bg-gray-200 rounded-xl aspect-square mb-2"></div>
                    <div class="h-4 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-2"></div>
                </div>
                <div class="animate-pulse hidden md:block">
                    <div class="bg-gray-200 rounded-xl aspect-square mb-2"></div>
                    <div class="h-4 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-2"></div>
                </div>
            </div>
        </div>
    </section>

    
    <section class="py-8 md:py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="section-title text-2xl md:text-3xl font-bold text-center mb-6 md:mb-10">Shop by <span class="text-green-600">Category</span></h2>
            <div class="category-grid">
                <button onclick="filterCategory('Seeds')" class="bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl md:rounded-2xl p-4 md:p-6 text-center hover:shadow-lg transition-all active:scale-95">
                    <i class="fas fa-seedling text-3xl md:text-4xl mb-2 md:mb-3"></i>
                    <h3 class="text-lg md:text-xl font-bold">Seeds</h3>
                </button>
                <button onclick="filterCategory('Plants')" class="bg-gradient-to-br from-emerald-500 to-emerald-600 text-white rounded-xl md:rounded-2xl p-4 md:p-6 text-center hover:shadow-lg transition-all active:scale-95">
                    <i class="fas fa-leaf text-3xl md:text-4xl mb-2 md:mb-3"></i>
                    <h3 class="text-lg md:text-xl font-bold">Plants</h3>
                </button>
                <button onclick="filterCategory('Tools')" class="bg-gradient-to-br from-teal-500 to-teal-600 text-white rounded-xl md:rounded-2xl p-4 md:p-6 text-center hover:shadow-lg transition-all active:scale-95">
                    <i class="fas fa-tools text-3xl md:text-4xl mb-2 md:mb-3"></i>
                    <h3 class="text-lg md:text-xl font-bold">Tools</h3>
                </button>
                <button onclick="filterCategory('Fertilizers')" class="bg-gradient-to-br from-lime-500 to-lime-600 text-white rounded-xl md:rounded-2xl p-4 md:p-6 text-center hover:shadow-lg transition-all active:scale-95">
                    <i class="fas fa-flask text-3xl md:text-4xl mb-2 md:mb-3"></i>
                    <h3 class="text-lg md:text-xl font-bold">Fertilizers</h3>
                </button>
            </div>
        </div>
    </section>

    
    <section id="products" class="py-8 md:py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6 md:mb-8">
                <h2 class="section-title text-2xl md:text-3xl font-bold">All Products</h2>
                <div class="flex gap-2 w-full sm:w-auto">
                    <input type="text" id="searchInput" placeholder="Search products..." onkeyup="searchProducts()" 
                           class="flex-1 sm:w-64 px-4 py-2 md:py-3 border rounded-lg focus:border-green-500 focus:outline-none text-sm md:text-base">
                    <button onclick="filterCategory('')" class="px-4 md:px-6 py-2 md:py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 whitespace-nowrap text-sm md:text-base">
                        Show All
                    </button>
                </div>
            </div>
            <div id="productsGrid" class="products-grid">
                <p class="col-span-full text-center text-gray-500 py-8">Loading products...</p>
            </div>
        </div>
    </section>

    
    <section id="track" class="py-8 md:py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="max-w-md mx-auto bg-white rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 text-center">
                <div class="w-12 h-12 md:w-16 md:h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-truck text-2xl md:text-3xl text-green-600"></i>
                </div>
                <h2 class="text-xl md:text-2xl font-bold mb-2">Track Your Order</h2>
                <p class="text-gray-600 text-sm md:text-base mb-4 md:mb-6">Enter your mobile number</p>
                <div class="flex flex-col sm:flex-row gap-2">
                    <input type="tel" id="trackMobile" maxlength="10" placeholder="10-digit mobile" 
                           class="flex-1 px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none text-base">
                    <button onclick="trackOrder()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium">
                        <i class="fas fa-search mr-2"></i>Track
                    </button>
                </div>
                <div id="trackResults" class="mt-6 text-left space-y-3"></div>
            </div>
        </div>
    </section>

    
    <section id="support" class="py-8 md:py-12 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="section-title text-2xl md:text-3xl font-bold text-center mb-4">We're Here to <span class="text-green-600">Help</span></h2>
            <p class="text-gray-600 text-center mb-6 md:mb-10 max-w-xl mx-auto text-sm md:text-base">Contact us directly through WhatsApp or Email</p>
            
            <div class="support-grid max-w-2xl mx-auto">
                <a href="https://wa.me/919220814943" target="_blank" class="bg-green-50 rounded-xl md:rounded-2xl p-6 md:p-8 text-center hover:shadow-lg transition-all group no-underline">
                    <div class="w-12 h-12 md:w-16 md:h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform">
                        <i class="fab fa-whatsapp text-2xl md:text-3xl text-white"></i>
                    </div>
                    <h3 class="font-bold text-lg md:text-xl mb-2">WhatsApp</h3>
                    <p class="text-gray-500 text-sm mb-2">Fastest Response</p>
                    <span class="text-green-600 font-bold text-sm md:text-base">+91 9220814943</span>
                </a>
                
                <a href="mailto:rooftopgardening09@gmail.com" class="bg-green-50 rounded-xl md:rounded-2xl p-6 md:p-8 text-center hover:shadow-lg transition-all group no-underline">
                    <div class="w-12 h-12 md:w-16 md:h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform">
                        <i class="fas fa-envelope text-2xl md:text-3xl text-white"></i>
                    </div>
                    <h3 class="font-bold text-lg md:text-xl mb-2">Email</h3>
                    <p class="text-gray-500 text-sm mb-2">Within 24 hours</p>
                    <span class="text-green-600 font-bold text-xs md:text-sm break-all">rooftopgardening09@gmail.com</span>
                </a>
            </div>
            
            <p class="text-center text-gray-500 mt-6 text-sm md:text-base">
                <i class="fas fa-clock mr-2"></i>Mon-Sat: 9AM - 7PM
            </p>
        </div>
    </section>

    
    <section id="policies" class="py-8 md:py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="section-title text-2xl md:text-3xl font-bold text-center mb-6 md:mb-10">Our <span class="text-green-600">Policies</span></h2>
            
            <div class="max-w-4xl mx-auto">
                <div class="policy-tabs mb-6">
                    <button onclick="showPolicy('about')" class="policy-tab px-3 md:px-4 py-2 rounded-lg font-medium bg-green-600 text-white text-sm md:text-base" data-tab="about">About Us</button>
                    <button onclick="showPolicy('shipping')" class="policy-tab px-3 md:px-4 py-2 rounded-lg font-medium bg-gray-200 text-sm md:text-base" data-tab="shipping">Shipping</button>
                    <button onclick="showPolicy('return')" class="policy-tab px-3 md:px-4 py-2 rounded-lg font-medium bg-gray-200 text-sm md:text-base" data-tab="return">Returns</button>
                    <button onclick="showPolicy('privacy')" class="policy-tab px-3 md:px-4 py-2 rounded-lg font-medium bg-gray-200 text-sm md:text-base" data-tab="privacy">Privacy</button>
                    <button onclick="showPolicy('terms')" class="policy-tab px-3 md:px-4 py-2 rounded-lg font-medium bg-gray-200 text-sm md:text-base" data-tab="terms">Terms</button>
                </div>
                
                <div class="bg-white rounded-xl md:rounded-2xl p-4 md:p-6 shadow-sm">
                    <div id="policy-about" class="policy-content">
                        <div class="about-logo">
                            <img src="/logo.png" 
                                 alt="Rooftop Gardening Logo" 
                                 class="w-full h-full object-contain"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center hidden">
                                <i class="fas fa-seedling text-4xl text-white"></i>
                            </div>
                        </div>
                        <h3 class="text-xl md:text-2xl font-bold text-green-600 mb-3 md:mb-4 text-center">
                            <i class="fas fa-seedling mr-2"></i>About Rooftop Gardening
                        </h3>
                        <div class="space-y-3 text-sm md:text-base text-gray-700">
                            <p><strong>Founded:</strong> 2026</p>
                            <p><strong>Mission:</strong> To make gardening accessible to everyone.</p>
                            <h4 class="font-bold text-lg md:text-xl mt-4 md:mt-6 mb-2">What We Offer</h4>
                            <ul class="list-disc list-inside space-y-1 pl-2">
                                <li>Premium plants and seeds</li>
                                <li>Quality gardening tools</li>
                                <li>Organic fertilizers</li>
                                <li>Pan-India delivery</li>
                            </ul>
                            <h4 class="font-bold text-lg md:text-xl mt-4 md:mt-6 mb-2">Contact</h4>
                            <div class="space-y-2">
                                <p><i class="fas fa-envelope text-green-600 mr-2"></i>rooftopgardening09@gmail.com</p>
                                <p><i class="fab fa-whatsapp text-green-600 mr-2"></i>+91 9220814943</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="policy-shipping" class="policy-content hidden">
                        <h3 class="text-xl md:text-2xl font-bold text-green-600 mb-3 md:mb-4">
                            <i class="fas fa-truck mr-2"></i>Shipping Policy
                        </h3>
                        <div class="space-y-3 text-sm md:text-base text-gray-700">
                            <h4 class="font-bold text-lg md:text-xl mb-2">Processing Time</h4>
                            <p>Orders processed within 2-15 working days.</p>
                            <h4 class="font-bold text-lg md:text-xl mb-2">Delivery Time</h4>
                            <ul class="list-disc list-inside space-y-1 pl-2">
                                <li>Metro Cities: 3-15 days</li>
                                <li>Other Cities: 5-20 days</li>
                                <li>Remote Areas: 10-25days</li>
                            </ul>
                            <h4 class="font-bold text-lg md:text-xl mb-2">Shipping Charges</h4>
                            <p class="text-green-600 font-bold">✅ FREE delivery on orders above ₹1599 (Delhi only)</p>
                            <p>For other locations: Calculated based on weight and destination</p>
                            <p class="text-amber-600 text-sm mt-2">⚠️ For locations outside Delhi, final shipping cost will be confirmed prior to dispatch.</p>
                        </div>
                    </div>
                    
                    <div id="policy-return" class="policy-content hidden">
                        <h3 class="text-xl md:text-2xl font-bold text-green-600 mb-3 md:mb-4">
                            <i class="fas fa-undo mr-2"></i>Return Policy
                        </h3>
                        <div class="space-y-3 text-sm md:text-base">
                            <div class="bg-red-50 border-l-4 border-red-500 p-3 md:p-4 mb-3 md:mb-4">
                                <p class="text-red-700 font-bold text-sm md:text-base">
                                    ⚠️ All products are NON-RETURNABLE due to perishable nature.
                                </p>
                            </div>
                            <h4 class="font-bold text-lg md:text-xl mb-2 text-gray-800">Issue Resolution</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-700 pl-2">
                                <li><strong>Wrong Product:</strong> Report within 24 hours with photos</li>
                                <li><strong>Damaged:</strong> Report immediately with evidence</li>
                                <li><strong>Missing Items:</strong> Contact within 24 hours</li>
                            </ul>
                            <p class="mt-4 text-gray-700">We may offer replacement or store credit after verification.</p>
                        </div>
                    </div>
                    
                    <div id="policy-privacy" class="policy-content hidden">
                        <h3 class="text-xl md:text-2xl font-bold text-green-600 mb-3 md:mb-4">
                            <i class="fas fa-shield-alt mr-2"></i>Privacy Policy
                        </h3>
                        <div class="space-y-3 text-sm md:text-base text-gray-700">
                            <h4 class="font-bold text-lg md:text-xl mb-2">Information We Collect</h4>
                            <ul class="list-disc list-inside space-y-1 pl-2">
                                <li>Name, mobile, email, address</li>
                                <li>Order history</li>
                            </ul>
                            <h4 class="font-bold text-lg md:text-xl mb-2">How We Use It</h4>
                            <ul class="list-disc list-inside space-y-1 pl-2">
                                <li>Process orders</li>
                                <li>Send updates</li>
                                <li>Customer support</li>
                            </ul>
                            <p class="font-bold mt-4">We never sell your data to third parties.</p>
                        </div>
                    </div>
                    
                    <div id="policy-terms" class="policy-content hidden">
                        <h3 class="text-xl md:text-2xl font-bold text-green-600 mb-3 md:mb-4">
                            <i class="fas fa-file-contract mr-2"></i>Terms & Conditions
                        </h3>
                        <div class="space-y-2 text-sm md:text-base text-gray-700">
                            <ul class="list-disc list-inside space-y-2 pl-2">
                                <li>All prices in Indian Rupees (₹)</li>
                                <li>Orders subject to availability</li>
                                <li>Payment required before processing</li>
                                <li>Product images for reference only</li>
                                <li>We reserve right to refuse orders</li>
                                <li>Orders cannot be cancelled after dispatch</li>
                            </ul>
                            <p class="text-gray-500 text-xs md:text-sm mt-4">Last updated: January 2026</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <footer class="bg-gray-900 text-white py-8 md:py-12">
        <div class="container mx-auto px-4">
            <div class="footer-grid mb-6 md:mb-8">
                <div>
                    <div class="flex items-center gap-2 mb-3 md:mb-4">
                        <div class="footer-logo bg-white rounded-lg flex items-center justify-center">
                            <img src="/logo.png" 
                                 alt="Rooftop Gardening Logo" 
                                 class="w-full h-full object-contain p-2"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center hidden">
                                <i class="fas fa-seedling text-xl text-white"></i>
                            </div>
                        </div>
                        <div>
                            <span class="font-bold text-lg md:text-xl">Rooftop Gardening</span>
                            <p class="text-xs text-green-300">Premium Plants & Seeds</p>
                        </div>
                    </div>
                    <p class="text-gray-400 text-xs md:text-sm mb-3 md:mb-4">Transform your home into a green paradise with premium gardening supplies.</p>
                    <div class="flex gap-2 md:gap-4">
                        <a href="#" class="w-8 h-8 md:w-10 md:h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-pink-600 no-underline">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="w-8 h-8 md:w-10 md:h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-600 no-underline">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="w-8 h-8 md:w-10 md:h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-red-600 no-underline">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold mb-2 md:mb-4 text-base md:text-lg">Quick Links</h4>
                    <ul class="space-y-1 md:space-y-2 text-gray-400 text-sm md:text-base">
                        <li><a href="#home" class="hover:text-white no-underline">Home</a></li>
                        <li><a href="#products" class="hover:text-white no-underline">Products</a></li>
                        <li><a href="#track" class="hover:text-white no-underline">Track Order</a></li>
                        <li><a href="#support" class="hover:text-white no-underline">Support</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-2 md:mb-4 text-base md:text-lg">Policies</h4>
                    <ul class="space-y-1 md:space-y-2 text-gray-400 text-sm md:text-base">
                        <li><a href="#policies" onclick="showPolicy('shipping')" class="hover:text-white no-underline">Shipping</a></li>
                        <li><a href="#policies" onclick="showPolicy('return')" class="hover:text-white no-underline">Returns</a></li>
                        <li><a href="#policies" onclick="showPolicy('privacy')" class="hover:text-white no-underline">Privacy</a></li>
                        <li><a href="#policies" onclick="showPolicy('terms')" class="hover:text-white no-underline">Terms</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-2 md:mb-4 text-base md:text-lg">Contact</h4>
                    <ul class="space-y-1 md:space-y-2 text-gray-400 text-sm md:text-base">
                        <li class="flex items-start">
                            <i class="fas fa-phone text-green-400 mr-2 mt-0.5"></i>
                            <span>+91 9220814943</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-envelope text-green-400 mr-2 mt-0.5"></i>
                            <span>rooftopgardening09@gmail.com</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-clock text-green-400 mr-2 mt-0.5"></i>
                            <span>Mon-Sat: 9AM-7PM</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-4 md:pt-8 text-center text-gray-500 text-xs md:text-sm">
                <p>© 2026 Rooftop Gardening. All rights reserved.</p>
            </div>
        </div>
    </footer>

    
    <div id="cartOverlay" class="fixed inset-0 bg-black/50 z-40 hidden" onclick="closeCart()"></div>
    <div id="cartDrawer" class="fixed top-0 right-0 w-full max-w-md h-full bg-white z-50 transform translate-x-full transition-transform shadow-2xl overflow-y-auto"></div>

    
    <a href="https://wa.me/919220814943" target="_blank" 
       class="fixed bottom-4 md:bottom-6 left-4 md:left-6 w-12 h-12 md:w-14 md:h-14 bg-green-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 hover:scale-110 transition-all z-30 no-underline">
        <i class="fab fa-whatsapp text-xl md:text-2xl"></i>
    </a>

    
    <div id="toast" class="fixed bottom-4 right-4 z-50 max-w-sm"></div>

    <script>
        let products = [];
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');
        let customer = JSON.parse(localStorage.getItem('customer') || 'null');
        let shippingConfig = { freeShippingMin: 1599, baseRate: 30, perKgRate: 10 };

        const formatPrice = (n) => `₹${Number(n||0).toLocaleString('en-IN')}`;
        const getDiscount = (p, s) => (p > s && p > 0) ? Math.round(((p - s) / p) * 100) : 0;

        function isDelhiLocation(address) {
            if (!address) return false;
            const city = (address.city || '').toLowerCase();
            const state = (address.state || '').toLowerCase();
            const pincode = (address.pincode || '').toString();
            return city.includes('delhi') || state.includes('delhi') || pincode.startsWith('11');
        }

        document.addEventListener('DOMContentLoaded', async () => {
            await loadShippingConfig();
            updateCartCount();
            loadFeaturedProducts();
            loadProducts();
        });

        function toast(msg, type = 'success') {
            const colors = { success: 'bg-green-500', error: 'bg-red-500', info: 'bg-blue-500' };
            const t = document.createElement('div');
            t.className = `${colors[type]} text-white px-4 py-3 rounded-lg shadow-lg mb-2 transform transition-all`;
            t.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : 'info'}-circle mr-2"></i>${msg}`;
            document.getElementById('toast').appendChild(t);
            setTimeout(() => { t.remove(); }, 3000);
        }

        function toggleMobileMenu() {
            document.getElementById('mobileMenu')?.classList.toggle('hidden');
        }

        async function loadProducts(category = '', search = '') {
            try {
                let url = '/api/products?';
                if (category) url += `category=${category}&`;
                if (search) url += `search=${search}`;
                
                const res = await fetch(url);
                const data = await res.json();
                products = data.products || [];
                renderProducts();
            } catch (e) {
                toast('Failed to load products', 'error');
            }
        }

        async function loadFeaturedProducts() {
            try {
                const res = await fetch('/api/products?featured=true');
                const data = await res.json();
                renderFeatured(data.products || []);
            } catch (e) {
                console.error('Error loading featured:', e);
            }
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            if (!grid) return;
            
            if (!products.length) {
                grid.innerHTML = '<p class="col-span-full text-center text-gray-500 py-8">No products found</p>';
                return;
            }
            
            grid.innerHTML = products.map(p => productCard(p)).join('');
        }

        function renderFeatured(prods) {
            const grid = document.getElementById('featuredProducts');
            if (!grid) return;
            
            if (!prods.length) {
                grid.innerHTML = '<p class="col-span-full text-center text-gray-500 py-8">No featured products</p>';
                return;
            }
            grid.innerHTML = prods.slice(0, 4).map(p => productCard(p)).join('');
        }

        function productCard(p) {
            const discount = getDiscount(p.price, p.sellPrice);
            let stockStatus = '';
            let buttonHTML = '';
            
            if (p.stock <= 0) {
                stockStatus = '<div class="sold-out-badge">SOLD OUT</div>';
                buttonHTML = `
                    <button disabled 
                            class="flex-1 bg-gray-400 text-white py-2.5 rounded-lg font-medium text-sm opacity-60 cursor-not-allowed">
                        <i class="fas fa-ban mr-2"></i>Sold Out
                    </button>
                `;
            } else if (p.stock <= 5) {
                stockStatus = '<div class="limited-badge"><i class="fas fa-clock mr-1"></i>Limited Stock</div>';
                buttonHTML = `
                    <button onclick='addToCart(${JSON.stringify(p).replace(/'/g, "\\'")})' 
                            class="flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-lg font-medium text-sm">
                        <i class="fas fa-clock mr-2"></i>Limited Stock - Order Now
                    </button>
                `;
            } else {
                stockStatus = '';
                buttonHTML = `
                    <button onclick='addToCart(${JSON.stringify(p).replace(/'/g, "\\'")})' 
                            class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2.5 rounded-lg font-medium text-sm">
                        <i class="fas fa-cart-plus mr-2"></i>Add to Cart
                    </button>
                `;
            }
            
            return `
                <div class="product-card">
                    <div class="relative aspect-square bg-gray-100 overflow-hidden rounded-t-2xl">
                        ${discount > 0 ? `<div class="discount-badge">${discount}% OFF</div>` : ''}
                        ${p.featured ? `<div class="featured-badge"><i class="fas fa-star"></i></div>` : ''}
                        ${stockStatus}
                        
                        ${p.image ? `
                            <img src="${p.image}" 
                                 alt="${p.name}" 
                                 class="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                                 onerror="this.outerHTML='<div class=&quot;w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 text-gray-400&quot;><i class=&quot;fas fa-seedling text-4xl&quot;></i></div>'">
                        ` : `
                            <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 text-gray-400">
                                <i class="fas fa-seedling text-4xl"></i>
                            </div>
                        `}
                    </div>
                    
                    <div class="p-4 flex flex-col flex-1">
                        <p class="text-xs font-semibold text-green-600 uppercase tracking-wide mb-1">
                            ${p.category}
                        </p>
                        
                        <h3 class="font-bold text-gray-800 mb-2 line-clamp-2 h-12 text-sm sm:text-base">
                            ${p.name}
                        </h3>
                        
                        <p class="text-sm text-gray-600 line-clamp-2 h-10 mb-3">
                            ${p.description ? (p.description.length > 80 ? p.description.substring(0, 80) + '...' : p.description) : 'Premium quality gardening product.'}
                        </p>
                        
                        <div class="mt-auto">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-lg font-bold text-green-600">${formatPrice(p.sellPrice)}</span>
                                ${discount > 0 ? `<span class="text-sm text-gray-400 line-through">${formatPrice(p.price)}</span>` : ''}
                            </div>
                            
                            <div class="flex gap-2">
                                ${buttonHTML}
                                <button onclick="showQuickView('${p._id || p.id}')" 
                                        class="px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2.5 rounded-lg font-medium text-sm view-btn">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showQuickView(productId) {
            const product = products.find(p => p._id === productId || p.id === productId);
            
            if (!product) {
                toast('Product not found', 'error');
                return;
            }
            
            const discount = getDiscount(product.price, product.sellPrice);
            
            let stockBadge = '';
            let buttonHTML = '';
            let stockMessage = '';
            
            if (product.stock <= 0) {
                stockBadge = '<span class="inline-block bg-red-100 text-red-800 text-sm px-3 py-1 rounded-full ml-2">Out of Stock</span>';
                buttonHTML = `
                    <button disabled 
                            class="flex-1 bg-gray-400 text-white font-bold py-3.5 rounded-lg opacity-60 cursor-not-allowed">
                        <i class="fas fa-ban mr-2"></i>Sold Out
                    </button>
                `;
                stockMessage = '';
            } else if (product.stock <= 5) {
                stockBadge = `<span class="inline-block bg-orange-100 text-orange-800 text-sm px-3 py-1 rounded-full ml-2 font-semibold animate-pulse">
                    <i class="fas fa-clock mr-1"></i>Only ${product.stock} left!
                </span>`;
                buttonHTML = `
                    <button onclick="addToCartFromQuickView('${productId}')" 
                            class="flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold py-3.5 rounded-lg transition-all shadow-lg hover:shadow-orange-500/30">
                        <i class="fas fa-clock mr-2"></i>⚠️ Limited Stock - Order Now
                    </button>
                `;
                stockMessage = `
                    <div class="bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-500 p-4 mb-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <div class="bg-orange-500 rounded-full p-2 animate-pulse">
                                <i class="fas fa-exclamation-triangle text-white text-sm"></i>
                            </div>
                            <div>
                                <p class="font-extrabold text-orange-600 text-lg">⚠️ HURRY! LIMITED STOCK!</p>
                                <p class="text-orange-700 font-bold text-base">Only ${product.stock} items remaining</p>
                                <p class="text-orange-600 text-sm mt-1 font-semibold">Order now before it sells out!</p>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                stockBadge = `<span class="inline-block bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full ml-2">
                    In Stock: ${product.stock}
                </span>`;
                buttonHTML = `
                    <button onclick="addToCartFromQuickView('${productId}')" 
                            class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3.5 rounded-lg transition-colors">
                        <i class="fas fa-cart-plus mr-2"></i>Add to Cart
                    </button>
                `;
                stockMessage = '';
            }
            
            const modalHTML = `
            <div class="quick-view-modal" id="quickViewModal">
                <div class="quick-view-content">
                    <div class="flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10">
                        <h2 class="text-xl font-bold text-gray-800">${product.name}</h2>
                        <button onclick="closeQuickView()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>
                    
                    <div class="flex flex-col lg:flex-row p-6">
                        <div class="lg:w-1/2 mb-6 lg:mb-0 lg:pr-6">
                            <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
                                ${product.image ? `
                                    <img src="${product.image}" 
                                         alt="${product.name}" 
                                         class="w-full h-full object-contain"
                                         onerror="this.outerHTML='<div class=&quot;w-full h-full flex items-center justify-center bg-gray-100 text-gray-400&quot;><i class=&quot;fas fa-seedling text-4xl&quot;></i></div>'">
                                ` : `
                                    <div class="w-full h-full flex items-center justify-center bg-gray-100 text-gray-400">
                                        <i class="fas fa-seedling text-4xl"></i>
                                    </div>
                                `}
                            </div>
                        </div>
                        
                        <div class="lg:w-1/2">
                            <div class="mb-3 flex flex-wrap items-center gap-2">
                                <span class="inline-block bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">
                                    ${product.category}
                                </span>
                                ${stockBadge}
                            </div>
                            
                            ${stockMessage}
                            
                            <div class="flex items-center gap-3 mb-4">
                                <span class="text-2xl font-bold text-green-600">${formatPrice(product.sellPrice)}</span>
                                ${discount > 0 ? `
                                    <span class="text-gray-400 line-through">${formatPrice(product.price)}</span>
                                    <span class="bg-red-100 text-red-800 text-sm px-2 py-1 rounded-full">
                                        ${discount}% OFF
                                    </span>
                                ` : ''}
                            </div>
                            
                            <div class="mb-6">
                                <h4 class="font-bold text-lg mb-3 text-gray-700">Product Description</h4>
                                <div class="bg-gray-50 p-5 rounded-lg border border-gray-100">
                                    <p class="text-gray-700 leading-relaxed text-base whitespace-pre-line">
                                        ${product.description || 'No description available for this product. Please contact our support team for more details.'}
                                    </p>
                                </div>
                            </div>
                            
                            <div class="flex gap-3 sticky bottom-0 bg-white pt-2 pb-1">
                                ${buttonHTML}
                                <button onclick="closeQuickView()" 
                                        class="px-6 border-2 border-gray-300 hover:bg-gray-50 font-medium py-3.5 rounded-lg transition-colors">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `;
            
            const existingModal = document.getElementById('quickViewModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            const modalDiv = document.createElement('div');
            modalDiv.innerHTML = modalHTML;
            document.body.appendChild(modalDiv.firstElementChild);
            document.body.style.overflow = 'hidden';
        }

        function addToCartFromQuickView(productId) {
            const product = products.find(p => p._id === productId || p.id === productId);
            if (product && product.stock > 0) {
                addToCart(product);
                closeQuickView();
            }
        }

        function closeQuickView() {
            const modal = document.getElementById('quickViewModal');
            if (modal) {
                modal.remove();
            }
            document.body.style.overflow = 'auto';
        }

        function filterCategory(cat) {
            loadProducts(cat);
            document.getElementById('products')?.scrollIntoView({ behavior: 'smooth' });
        }

        function searchProducts() {
            const q = document.getElementById('searchInput')?.value || '';
            loadProducts('', q);
        }

        function updateCartCount() {
            const count = cart.reduce((s, i) => s + i.qty, 0);
            const el = document.getElementById('cartCount');
            if (el) {
                el.textContent = count;
                el.classList.toggle('hidden', count === 0);
            }
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        function addToCart(p) {
            if (p.stock <= 0) {
                toast('Product is out of stock', 'error');
                return;
            }
            
            const existing = cart.find(i => i.productId === p._id || i.productId === p.id);
            if (existing) {
                existing.qty++;
            } else {
                cart.push({
                    productId: p._id || p.id,
                    name: p.name,
                    price: p.price,
                    sellPrice: p.sellPrice,
                    image: p.image,
                    weight: p.weight || 0.5,
                    qty: 1
                });
            }
            saveCart();
            toast(`${p.name} added to cart!`);
        }

        function updateQty(id, qty) {
            if (qty <= 0) {
                cart = cart.filter(i => i.productId !== id);
            } else {
                const item = cart.find(i => i.productId === id);
                if (item) item.qty = Math.min(100, qty);
            }
            saveCart();
            renderCart();
        }

        function getCartTotals() {
            let mrp = 0, subtotal = 0, totalWeight = 0;
            
            cart.forEach(i => {
                mrp += i.price * i.qty;
                subtotal += i.sellPrice * i.qty;
                totalWeight += (i.weight || 0.5) * i.qty;
            });
            
            const discount = mrp - subtotal;
            const freeMin = shippingConfig.freeShippingMin;
            
            let isFree = false;
            if (customer && isDelhiLocation(customer)) {
                isFree = subtotal >= freeMin;
            }
            
            let shipping = 0;
            if (!isFree) {
                shipping = Math.round(shippingConfig.baseRate + (totalWeight * shippingConfig.perKgRate));
            }
            
            return { 
                mrp, 
                subtotal, 
                discount, 
                shipping, 
                isFree, 
                total: subtotal + shipping, 
                freeRemaining: Math.max(0, freeMin - subtotal),
                freeMin,
                totalWeight
            };
        }

        function openCart() {
            renderCart();
            document.getElementById('cartDrawer')?.classList.remove('translate-x-full');
            document.getElementById('cartOverlay')?.classList.remove('hidden');
        }

        function closeCart() {
            document.getElementById('cartDrawer')?.classList.add('translate-x-full');
            document.getElementById('cartOverlay')?.classList.add('hidden');
        }

        function renderCart() {
            const drawer = document.getElementById('cartDrawer');
            if (!drawer) return;
            
            const t = getCartTotals();
            
            if (!cart.length) {
                drawer.innerHTML = `
                    <div class="flex flex-col h-full">
                        <div class="flex items-center justify-between p-4 border-b">
                            <h2 class="text-xl font-bold"><i class="fas fa-shopping-cart text-green-600 mr-2"></i>Cart</h2>
                            <button onclick="closeCart()" class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="flex-1 flex flex-col items-center justify-center">
                            <i class="fas fa-shopping-basket text-6xl text-gray-300 mb-4"></i>
                            <p class="text-gray-500">Your cart is empty</p>
                            <button onclick="closeCart()" class="mt-4 bg-green-600 text-white px-6 py-2 rounded-lg">Shop Now</button>
                        </div>
                    </div>
                `;
                return;
            }
            
            drawer.innerHTML = `
                <div class="flex flex-col h-full">
                    <div class="flex items-center justify-between p-4 border-b">
                        <h2 class="text-xl font-bold"><i class="fas fa-shopping-cart text-green-600 mr-2"></i>Cart (${cart.reduce((s,i)=>s+i.qty,0)})</h2>
                        <button onclick="closeCart()" class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="flex-1 overflow-y-auto p-4 space-y-3">
                        ${cart.map(i => `
                            <div class="flex gap-3 bg-gray-50 rounded-lg p-3">
                                ${i.image ? `
                                    <img src="${i.image}" class="w-16 h-16 object-cover rounded">
                                ` : `
                                    <div class="w-16 h-16 bg-gray-200 rounded flex items-center justify-center">
                                        <i class="fas fa-seedling text-gray-400"></i>
                                    </div>
                                `}
                                <div class="flex-1">
                                    <h4 class="font-medium text-sm">${i.name}</h4>
                                    <p class="text-green-600 font-bold">${formatPrice(i.sellPrice)}</p>
                                    <div class="flex items-center gap-2 mt-1">
                                        <button onclick="updateQty('${i.productId}', ${i.qty-1})" class="w-6 h-6 bg-gray-200 rounded-full text-sm hover:bg-green-500 hover:text-white">-</button>
                                        <span>${i.qty}</span>
                                        <button onclick="updateQty('${i.productId}', ${i.qty+1})" class="w-6 h-6 bg-gray-200 rounded-full text-sm hover:bg-green-500 hover:text-white">+</button>
                                        <button onclick="updateQty('${i.productId}', 0)" class="ml-auto text-red-500"><i class="fas fa-trash text-sm"></i></button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="border-t p-4 bg-gray-50">
                        <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mb-3 text-sm">
                            <div class="flex items-start gap-2">
                                <i class="fas fa-info-circle text-amber-600 mt-0.5"></i>
                                <div class="text-amber-800">
                                    <p class="font-semibold">⚠️ Delivery charges are determined based on the destination and total order weight.</p>
                                    <p class="text-xs mt-1">For locations outside Delhi, the final shipping cost will be confirmed prior to dispatch.</p>
                                </div>
                            </div>
                        </div>
                        
                        ${!t.isFree ? `
                            ${customer && isDelhiLocation(customer) ? `
                                <div class="bg-green-50 border border-green-200 text-green-700 p-2 rounded-lg mb-3 text-sm">
                                    <i class="fas fa-truck mr-1"></i>Add ${formatPrice(t.freeRemaining)} for FREE delivery (Delhi Only)!
                                </div>
                            ` : ''}
                        ` : `
                            <div class="bg-green-100 text-green-700 p-2 rounded-lg mb-3 text-sm font-medium">
                                <i class="fas fa-check-circle mr-1"></i>FREE delivery (Delhi Only)! 🎉
                            </div>
                        `}
                        <div class="space-y-1 text-sm mb-3">
                            <div class="flex justify-between"><span>Subtotal</span><span>${formatPrice(t.mrp)}</span></div>
                            ${t.discount > 0 ? `<div class="flex justify-between text-green-600"><span>Discount</span><span>-${formatPrice(t.discount)}</span></div>` : ''}
                            <div class="flex justify-between">
                                <span>Estimated shipping</span>
                                <span class="${t.isFree ? 'text-green-600 font-semibold' : ''}">${t.isFree ? 'FREE' : formatPrice(t.shipping)}</span>
                            </div>
                            <div class="flex justify-between font-bold text-lg pt-2 border-t">
                                <span>Total</span>
                                <span class="text-green-600">${formatPrice(t.total)}</span>
                            </div>
                        </div>
                        <button onclick="checkout()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg">
                            <i class="fas fa-lock mr-2"></i>Checkout
                        </button>
                    </div>
                </div>
            `;
        }

        function checkout() {
            if (!cart.length) return toast('Cart is empty', 'error');
            closeCart();
            
            const saved = customer || {};
            const t = getCartTotals();
            
            showModal(`
                <div class="p-6">
                    <h2 class="text-xl font-bold mb-4"><i class="fas fa-truck text-green-600 mr-2"></i>Delivery Details</h2>
                    
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4 text-sm">
                        <div class="flex items-start gap-2">
                            <i class="fas fa-info-circle text-amber-600 mt-0.5"></i>
                            <div class="text-amber-800">
                                <p class="font-semibold">⚠️ Delivery charges are determined based on the destination and total order weight.</p>
                                <p class="text-xs mt-1">For locations outside Delhi, the final shipping cost will be confirmed prior to dispatch.</p>
                            </div>
                        </div>
                    </div>
                    
                    <form onsubmit="placeOrder(event)">
                        <div class="space-y-3">
                            <input type="text" name="name" required placeholder="Full Name *" value="${saved.name||''}" class="w-full px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">
                            <input type="tel" name="mobile" required placeholder="Mobile Number *" maxlength="10" value="${saved.mobile||''}" class="w-full px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">
                            <input type="email" name="email" placeholder="Email (optional)" value="${saved.email||''}" class="w-full px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">
                            <textarea name="address" required placeholder="Full Address *" rows="2" class="w-full px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">${saved.address||''}</textarea>
                            <div class="grid grid-cols-2 gap-3">
                                <input type="text" name="city" required placeholder="City *" value="${saved.city||''}" class="px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">
                                <input type="text" name="pincode" required placeholder="Pincode *" maxlength="6" value="${saved.pincode||''}" class="px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">
                            </div>
                            <input type="text" name="state" required placeholder="State *" value="${saved.state||''}" class="w-full px-4 py-3 border rounded-lg focus:border-green-500 focus:outline-none">
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4 mt-4">
                            <div class="flex justify-between mb-1"><span>Subtotal</span><span>${formatPrice(t.mrp)}</span></div>
                            ${t.discount > 0 ? `<div class="flex justify-between text-green-600 mb-1"><span>Discount</span><span>-${formatPrice(t.discount)}</span></div>` : ''}
                            <div class="flex justify-between mb-1">
                                <span>Estimated shipping</span>
                                <span class="${t.isFree ? 'text-green-600' : ''}">${t.isFree ? 'FREE' : formatPrice(t.shipping)}</span>
                            </div>
                            <div class="flex justify-between font-bold text-lg border-t pt-2">
                                <span>Total</span>
                                <span class="text-green-600">${formatPrice(t.total)}</span>
                            </div>
                        </div>
                        <button type="submit" id="orderBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg mt-4">
                            <i class="fas fa-lock mr-2"></i>Place Order
                        </button>
                    </form>
                </div>
            `);
        }

        async function placeOrder(e) {
            e.preventDefault();
            const form = e.target;
            const btn = document.getElementById('orderBtn');
            
            const cust = {
                name: form.name.value,
                mobile: form.mobile.value,
                email: form.email.value,
                address: form.address.value,
                city: form.city.value,
                state: form.state.value,
                pincode: form.pincode.value
            };
            
            if (!/^[6-9]\d{9}$/.test(cust.mobile)) {
                return toast('Enter valid 10-digit mobile', 'error');
            }
            
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
            
            try {
                const res = await fetch('/api/orders/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        customer: cust,
                        items: cart.map(i => ({ productId: i.productId, qty: i.qty }))
                    })
                });
                
                const data = await res.json();
                if (!res.ok) throw new Error(data.error);
                
                customer = cust;
                localStorage.setItem('customer', JSON.stringify(cust));
                
                cart = [];
                saveCart();
                
                closeModal();
                showPayment(data);
                
            } catch (err) {
                toast(err.message || 'Order failed', 'error');
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-lock mr-2"></i>Place Order';
            }
        }

        function showPayment(data) {
            const { order, payment } = data;
            
            showModal(`
                <div class="text-center">
                    <div class="bg-green-600 text-white p-4">
                        <h2 class="text-xl font-bold">Pay ${formatPrice(payment.amount)}</h2>
                        <p class="text-sm opacity-90">Order: ${order.orderId}</p>
                    </div>
                    <div class="p-6">
                        <div class="bg-white border-2 rounded-xl p-4 inline-block mb-4">
                            <img src="${payment.qrCode}" alt="QR Code" class="w-48 h-48 md:w-56 md:h-56">
                        </div>
                        <p class="text-gray-500 text-sm mb-4">Scan QR code with any UPI app</p>
                        
                        <div class="bg-gray-100 rounded-lg p-4 mb-4">
                            <p class="text-xs text-gray-500 mb-1">UPI ID</p>
                            <div class="flex items-center justify-between gap-2">
                                <p id="upiIdText" class="font-mono font-bold text-sm md:text-base truncate">
                                    ${payment.upiId}
                                </p>
                                <button 
                                    onclick="copyUpiId('${payment.upiId}')"
                                    class="shrink-0 bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded-lg text-sm whitespace-nowrap"
                                >
                                    <i class="fas fa-copy mr-1"></i>Copy
                                </button>
                            </div>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-2 mb-4">
                            <button 
                                onclick="copyUpiId('${payment.upiId}')" 
                                class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-sm sm:text-base"
                            >
                                <i class="fas fa-copy mr-2"></i>Copy UPI ID
                            </button>
                            <button 
                                onclick="confirmPayment('${order.orderId}')" 
                                id="payBtn"
                                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg text-sm sm:text-base"
                            >
                                <i class="fas fa-check-circle mr-2"></i>I Have Paid
                            </button>
                        </div>
                    </div>
                </div>
            `, '400px');
        }

        function copyUpiId(upiId) {
            const tempInput = document.createElement('input');
            tempInput.value = upiId;
            document.body.appendChild(tempInput);
            
            tempInput.select();
            tempInput.setSelectionRange(0, 99999);
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    toast('UPI ID copied to clipboard! ✅', 'success');
                    
                    const copyBtn = document.querySelector('button[onclick*="copyUpiId"]');
                    if (copyBtn) {
                        const originalText = copyBtn.innerHTML;
                        copyBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Copied!';
                        copyBtn.classList.add('bg-green-700');
                        
                        setTimeout(() => {
                            copyBtn.innerHTML = originalText;
                            copyBtn.classList.remove('bg-green-700');
                        }, 2000);
                    }
                } else {
                    throw new Error('Copy failed');
                }
            } catch (err) {
                navigator.clipboard.writeText(upiId)
                    .then(() => {
                        toast('UPI ID copied to clipboard! ✅', 'success');
                    })
                    .catch(() => {
                        toast('Could not copy UPI ID. Please select and copy manually.', 'error');
                        tempInput.focus();
                    });
            }
            
            document.body.removeChild(tempInput);
        }

        async function confirmPayment(orderId) {
            const btn = document.getElementById('payBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Verifying...';
            
            try {
                const res = await fetch(`/api/orders/${orderId}/payment-done`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mobile: customer.mobile })
                });
                
                if (!res.ok) throw new Error((await res.json()).error);
                
                closeModal();
                showModal(`
                    <div class="text-center p-8">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check text-3xl text-green-600"></i>
                        </div>
                        <h2 class="text-xl font-bold mb-2">Payment Submitted!</h2>
                        <p class="text-gray-600 mb-4">We'll verify your payment in 15-30 minutes.</p>
                        <p class="bg-gray-100 rounded-lg p-3 font-mono mb-4">${orderId}</p>
                        <div class="flex gap-2">
                            <a href="https://wa.me/919220814943?text=Order ${orderId} - Please verify payment" target="_blank" class="flex-1 bg-green-600 text-white py-2 rounded-lg">
                                <i class="fab fa-whatsapp mr-2"></i>WhatsApp
                            </a>
                            <button onclick="closeModal()" class="flex-1 bg-gray-200 py-2 rounded-lg">Close</button>
                        </div>
                    </div>
                `, '380px');
            } catch (err) {
                toast(err.message, 'error');
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-check-circle mr-2"></i>I Have Paid';
            }
        }

        async function trackOrder() {
            const mobile = document.getElementById('trackMobile')?.value.replace(/\D/g, '') || '';
            if (mobile.length !== 10) return toast('Enter valid mobile', 'error');
            
            try {
                const res = await fetch(`/api/orders/track/${mobile}`);
                const data = await res.json();
                
                const container = document.getElementById('trackResults');
                if (!container) return;
                
                if (!data.orders?.length) {
                    container.innerHTML = '<p class="text-center text-gray-500 py-4">No orders found</p>';
                    return;
                }
                
                const colors = {
                    initiated: 'bg-yellow-100 text-yellow-800',
                    payment_pending: 'bg-blue-100 text-blue-800',
                    confirmed: 'bg-green-100 text-green-800',
                    processing: 'bg-purple-100 text-purple-800',
                    shipped: 'bg-indigo-100 text-indigo-800',
                    delivered: 'bg-green-100 text-green-800',
                    cancelled: 'bg-red-100 text-red-800'
                };
                
                container.innerHTML = data.orders.map(o => `
                    <div class="bg-gray-50 rounded-lg p-4 mb-3">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <p class="font-bold">${o.orderId}</p>
                                <p class="text-xs text-gray-500">${new Date(o.createdAt).toLocaleDateString()}</p>
                            </div>
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${colors[o.status] || 'bg-gray-100'}">
                                ${o.status.replace('_',' ').toUpperCase()}
                            </span>
                        </div>
                        <p class="text-sm text-gray-600">${o.items?.map(i => i.name).join(', ')}</p>
                        <p class="font-bold text-green-600 mt-1">${formatPrice(o.total)}</p>
                    </div>
                `).join('');
            } catch (e) {
                toast('Failed to track', 'error');
            }
        }

        function showPolicy(tab) {
            document.querySelectorAll('.policy-content').forEach(c => c.classList.add('hidden'));
            document.querySelectorAll('.policy-tab').forEach(t => {
                t.classList.remove('bg-green-600', 'text-white');
                t.classList.add('bg-gray-200');
            });
            document.getElementById(`policy-${tab}`)?.classList.remove('hidden');
            const activeTab = document.querySelector(`.policy-tab[data-tab="${tab}"]`);
            if (activeTab) {
                activeTab.classList.remove('bg-gray-200');
                activeTab.classList.add('bg-green-600', 'text-white');
            }
        }

        function showModal(content, maxWidth = '500px') {
            let overlay = document.getElementById('modalOverlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.id = 'modalOverlay';
                overlay.className = 'fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4';
                overlay.onclick = (e) => { if (e.target === overlay) closeModal(); };
                document.body.appendChild(overlay);
            }
            overlay.innerHTML = `
                <div class="bg-white rounded-2xl w-full shadow-2xl overflow-hidden" style="max-width:${maxWidth};max-height:90vh;overflow-y:auto;">
                    ${content}
                </div>
            `;
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('modalOverlay')?.remove();
            document.body.style.overflow = '';
        }

        async function loadShippingConfig() {
            try {
                const res = await fetch('/api/shipping');
                const data = await res.json();
                shippingConfig = {
                    freeShippingMin: data.freeShippingMin || 1599,
                    baseRate: data.baseRate || 30,
                    perKgRate: data.perKgRate || 10
                };
            } catch (e) {}
        }
    </script>
</body>
</html>
